<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Eclipse Chat โ ูุณุฎู ุญุฑููโุง</title>

  <!-- Styles (replace with your chat.css) -->
  <link rel="stylesheet" href="chat.css">

  <!-- Socket.IO (server provides /socket.io/socket.io.js) -->
  <script src="/socket.io/socket.io.js"></script>

  <!-- Icons (simple inline SVG usage later) -->
  <style> /* minimal fallback font for systems without Vazir */ @font-face{font-family:Vazir;src:local('Vazir'), local('Tahoma');} body{font-family:Vazir, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}</style>
</head>
<body class="theme-telegram">
  <!-- Topbar -->
  <header class="topbar">
    <div class="left">
      <button id="hamburger" class="icon-btn" title="ููู">
        <!-- hamburger -->
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
      <h1 class="app-title">Eclipse Chat</h1>
    </div>

    <div class="center">
      <input id="globalSearch" class="search-input" placeholder="ุฌุณุชุฌู ุณุฑุน (ุขุฏ ุง ุงุณู)" aria-label="search">
    </div>

    <div class="right">
      <button id="startChatBtn" class="icon-btn" title="ูพุงู ุฌุฏุฏ">+</button>
      <select id="themeSelect" title="ุงูุชุฎุงุจ ุชู" aria-label="theme select">
        <option value="theme-telegram">ุชูฺฏุฑุงู (ูพุดโูุฑุถ)</option>
        <option value="theme-instagram">ุงูุณุชุงฺฏุฑุงู</option>
        <option value="theme-whatsapp">ูุงุชุณุงูพ</option>
        <option value="theme-future">ููฺุฑ</option>
      </select>
      <button id="openSaved" class="icon-btn" title="ูพุงูโูุง ุฐุฎุฑูโุดุฏู">โ</button>
    </div>
  </header>

  <!-- Main layout -->
  <main class="main-layout container">

    <!-- Sidebar / Conversations -->
    <aside id="sidebar" class="rounded" role="navigation">
      <div id="sidebarTop" class="sidebar-header">
        <img id="profileAvatar" class="avatar" src="/default.png" alt="avatar">
        <div class="profile-meta">
          <div id="myName" class="my-name">ฺฉุงุฑุจุฑ</div>
          <div id="myId" class="my-id">@yourid</div>
        </div>
      </div>

      <div class="mb-8 p-8">
        <button id="newChatBtn" class="small-btn">+ ฺฏูุชฺฏู ุฌุฏุฏ</button>
        <button id="clearLocalBtn" class="small-btn">ูพุงฺฉุณุงุฒ ูุญู</button>
      </div>

      <ul id="convList" class="conv-list" aria-live="polite"></ul><!-- legacy id for some scripts -->
      <div id="conversations-list" class="conv-list hidden"></div><!-- alternate id (keeps compatibility with different JS versions) -->

      <div class="sidebar-footer">
        <div class="muted">ูุณุฎู: Super-Pro</div>
        <div>
          <button id="logoutBtn" class="small-btn">ุฎุฑูุฌ</button>
        </div>
      </div>
    </aside>

    <!-- Chat panel -->
    <section id="chatPanel" class="rounded">
      <div id="chatHeader" class="chat-header hidden">
        <div class="user-info">
          <img id="chatPartnerAvatar" class="avatar-small" src="/default.png" alt="avatar">
          <div>
            <div id="chatName" class="chat-name">ุฏูุณุช</div>
            <div id="chatStatus" class="chat-status muted">ุขููุงู</div>
          </div>
        </div>
        <div class="chat-actions">
          <button id="chatMenuToggle" class="icon-btn">โฐ</button>
        </div>
      </div>

      <div id="messages" class="messages" aria-live="polite" role="log">
        <!-- message items will be injected here -->
      </div>

      <!-- Composer -->
      <form id="sendForm" class="input-bar" autocomplete="off">
        <input id="fileInput" type="file" class="hidden" />
        <button type="button" id="attachmentBtn" class="attach-btn" title="ูุงู/ุนฺฉุณ/ูุณ">๐</button>
        <textarea id="msgInput" class="msg-input" rows="1" placeholder="ูพุงู ุฎูุฏ ุฑุง ุชุงูพ ฺฉูุฏ..."></textarea>
        <button id="sendBtn" type="submit" class="send-btn">ุงุฑุณุงู</button>
      </form>
    </section>
  </main>

  <!-- Templates -->
  <template id="tpl-message">
    <li class="message-item" data-id="">
      <div class="message-bubble">
        <div class="message-text"></div>
        <div class="msg-attachments"></div>
        <div class="message-meta">
          <span class="msg-time"></span>
          <span class="msg-status"></span>
        </div>
      </div>
      <div class="msg-actions" aria-hidden="true">
        <button class="edit-btn" title="ูุฑุงุด">โ</button>
        <button class="delete-btn" title="ุญุฐู">๐</button>
        <button class="more-btn" title="ุจุดุชุฑ">โฏ</button>
      </div>
    </li>
  </template>

  <!-- Modals / Panels -->
  <div id="newChatModal" class="modal hidden" aria-hidden="true">
    <div class="modal-box">
      <h3>ฺฏูุชฺฏู ุฌุฏุฏ</h3>
      <input id="newChatInput" class="new-chat-input" placeholder="ุขุฏ ุง ูุฒุฑูู ุฑุง ูุงุฑุฏ ฺฉูุฏ">
      <div style="display:flex;gap:8px;margin-top:10px;justify-content:flex-end">
        <button id="cancelNewChat" class="btn-link">ุงูุตุฑุงู</button>
        <button id="createChat" class="small-btn">ุงุฌุงุฏ</button>
      </div>
    </div>
  </div>

  <aside id="profilePanel" class="side-panel hidden" aria-hidden="true">
    <img id="profileAvatarPreview" class="avatar-large" src="/default.png" alt="avatar">
    <div style="text-align:center;margin-bottom:8px">
      <input id="editDisplayName" placeholder="ูุงู ููุงุด" />
      <input id="editUsername" placeholder="ุขุฏ (ูุขุฏ)" />
    </div>
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
      <button id="closeProfile" class="btn-link">ุจุณุชู</button>
      <button id="saveProfile" class="small-btn">ุฐุฎุฑู</button>
    </div>
  </aside>

  <aside id="settingsPanel" class="side-panel hidden" aria-hidden="true">
    <h3>ุชูุธูุงุช</h3>
    <label>ุชู ฺฉุงุฑุจุฑ</label>
    <select id="themeSelector">
      <option value="theme-telegram">ุชูฺฏุฑุงู</option>
      <option value="theme-instagram">ุงูุณุชุงฺฏุฑุงู</option>
      <option value="theme-whatsapp">ูุงุชุณุงูพ</option>
      <option value="theme-future">ููฺุฑ</option>
    </select>
    <div style="margin-top:12px">
      <label><input id="nightModeToggle" type="checkbox"> ูุงุช ููุฏ</label>
    </div>
  </aside>

  <aside id="savedMessagesPanel" class="side-panel hidden" aria-hidden="true">
    <h3>ูพุงูโูุง ุฐุฎุฑูโุดุฏู</h3>
    <div id="savedList" class="p-8"></div>
  </aside>

  <!-- Footer scripts: include chat.js (client logic) -->
  <script src="chat.js"></script>
</body>
</html>
